exports.id=518,exports.ids=[518],exports.modules={88:e=>{e.exports={gameContainer:"Game_gameContainer__DCVxw",gameHeader:"Game_gameHeader__jef7Y",headerButtons:"Game_headerButtons__B8wAT",pickaxesButton:"Game_pickaxesButton___3L1u",inventoryButton:"Game_inventoryButton__zDRef",buttonIcon:"Game_buttonIcon__GZTyW",stats:"Game_stats__AXLa3",avatar:"Game_avatar__WGgR4",avatarImage:"Game_avatarImage__6K_UX",statItem:"Game_statItem__Ej0sS",statIcon:"Game_statIcon__EGYV8",gameArea:"Game_gameArea__GjGTz",biomeContainer:"Game_biomeContainer__dvKa1",biome:"Game_biome__K3Z90",shake:"Game_shake__cK_dY",desert:"Game_desert__59lr4",pickaxeCursor:"Game_pickaxeCursor__VrlXH",swingAnimation:"Game_swingAnimation__J3dxl",swing:"Game_swing__qyeYb",crack:"Game_crack__ZJr8u",biomeGrid:"Game_biomeGrid__YYxIa",biomeBlock:"Game_biomeBlock__hlTQK",hoveredBlock:"Game_hoveredBlock__5vRWz",crackedBlock:"Game_crackedBlock__U8CK6",damageSpot:"Game_damageSpot__Zc_DO",fadeOut:"Game_fadeOut__PXbw4",crackOverlay:"Game_crackOverlay__mUKXl",secondaryCracks:"Game_secondaryCracks__KqY1e",pulse:"Game_pulse__7Akc_",criticalCracks:"Game_criticalCracks__hctP5",pulseCritical:"Game_pulseCritical__eaqtV",verticalHealthContainer:"Game_verticalHealthContainer__QVrRO",verticalHealthBar:"Game_verticalHealthBar__Tn4cQ",verticalHealthText:"Game_verticalHealthText__VWYIO",horizontalHealthContainer:"Game_horizontalHealthContainer__U_KQk",horizontalHealthBar:"Game_horizontalHealthBar__wMR8i",horizontalHealthText:"Game_horizontalHealthText__3op2q",gemstone:"Game_gemstone__Pzzoa",pop:"Game_pop__kIeLx",mathProblem:"Game_mathProblem__cbFZ4",question:"Game_question__75OVD",answerArea:"Game_answerArea__yO3SB",answer:"Game_answer__RS4lw",numpad:"Game_numpad__EsEnF",numpadBtn:"Game_numpadBtn__EZ10M",clearBtn:"Game_clearBtn__KlC5c",deleteBtn:"Game_deleteBtn__KQDIh",submitBtn:"Game_submitBtn__bt_xx",shopPanel:"Game_shopPanel__x6_s6",pickaxesItems:"Game_pickaxesItems__5qS0e",pickaxesItem:"Game_pickaxesItem__UM5X6",shopItemImg:"Game_shopItemImg__SNjeb",itemTooltip:"Game_itemTooltip__96Agx",fadeIn:"Game_fadeIn__kMifl",itemInfo:"Game_itemInfo__QIOMm",itemName:"Game_itemName__kAkjd",itemStats:"Game_itemStats__KXzBA",itemCost:"Game_itemCost__HrN00",buyBtn:"Game_buyBtn__4An2v",affordableCost:"Game_affordableCost__P__wd",unaffordableCost:"Game_unaffordableCost__viXO3",modal:"Game_modal__2pRTh",modalShow:"Game_modalShow__bynoR",modalContent:"Game_modalContent__P7w0X",modalHeader:"Game_modalHeader__Z_kNk",closeBtn:"Game_closeBtn__lFsNh",shopModalContent:"Game_shopModalContent__FXQeH",pickaxesModalContent:"Game_pickaxesModalContent__WNmK7",restartBtn:"Game_restartBtn__Lb4tw",inventoryRow:"Game_inventoryRow__7GSrm",inventorySlot:"Game_inventorySlot__8sAaP",selected:"Game_selected__BQ8Ic",inventoryItem:"Game_inventoryItem__V_hWy",itemCount:"Game_itemCount__SwmcS",slotNumber:"Game_slotNumber__03ear",durabilityBar:"Game_durabilityBar__qeq2x",durabilityFill:"Game_durabilityFill__cGHw2",medium:"Game_medium__0wKzQ",low:"Game_low__dJaRD",inventorySection:"Game_inventorySection__adyfa",pickaxeGrid:"Game_pickaxeGrid__1E9G2",inventoryDetails:"Game_inventoryDetails__FwwYr",selectedItemDetails:"Game_selectedItemDetails__WhpFd",selectButton:"Game_selectButton__XfYI_",currentlyEquipped:"Game_currentlyEquipped__M1NP5",quickInventoryContainer:"Game_quickInventoryContainer__y_YTY",quickInventorySection:"Game_quickInventorySection__3mFz0",quickInventoryLabel:"Game_quickInventoryLabel__Nt4so",quickInventory:"Game_quickInventory__Cz9Og",quickItemTooltip:"Game_quickItemTooltip__zlhuV",pickaxeHealth:"Game_pickaxeHealth__QHgq6",lowHealth:"Game_lowHealth__XJ4kF",mediumHealth:"Game_mediumHealth__v_BZ1",goodHealth:"Game_goodHealth__tTZ_a",brokenPickaxeNotification:"Game_brokenPickaxeNotification__dUA5g",fadeInOut:"Game_fadeInOut__xlUoa",unlockBiomesButton:"Game_unlockBiomesButton__E8UsO",biomesModalContent:"Game_biomesModalContent__HtN_N",biomesSection:"Game_biomesSection__AIv_y",biomesGrid:"Game_biomesGrid__e3nXY",biomesDrawerContent:"Game_biomesDrawerContent__5ELj0",biomeItem:"Game_biomeItem__zhlo9",biomeImageContainer:"Game_biomeImageContainer__nU75s",biomeItemImg:"Game_biomeItemImg__JVH51",availableBlocks:"Game_availableBlocks__fLSy6",blockImagesContainer:"Game_blockImagesContainer__hCEhC",blockImageWrapper:"Game_blockImageWrapper__vZauU",blockImage:"Game_blockImage__P1NCd",blockName:"Game_blockName__jg9L4",biomeNameOverlay:"Game_biomeNameOverlay__yZ4Hb",biomeUnlocked:"Game_biomeUnlocked__ZZlLU",biomeLocked:"Game_biomeLocked__6vjWm",biomeLockedImg:"Game_biomeLockedImg__RFDys",lockOverlay:"Game_lockOverlay__gYBfb",lockIcon:"Game_lockIcon__hlC2P",unlockedIndicator:"Game_unlockedIndicator__z_Y_M",unlockButton:"Game_unlockButton__cls4_",unlockCost:"Game_unlockCost__MR6TD",unlockButtonDisabled:"Game_unlockButtonDisabled__5Wofl",biomeSelected:"Game_biomeSelected__FPWT3",currentIndicator:"Game_currentIndicator__PCrVR",biomeDestroyedNotification:"Game_biomeDestroyedNotification__zLwhW",biomeDestroyed:"Game_biomeDestroyed__Q4f_u",destroyedOverlay:"Game_destroyedOverlay__St_OS",pulseOverlay:"Game_pulseOverlay__D9v8Y",wrongAnswerShake:"Game_wrongAnswerShake__oXjjO",wrongAnswerFlash:"Game_wrongAnswerFlash__LoOkO",incorrectText:"Game_incorrectText__XtzyJ",showIncorrect:"Game_showIncorrect__FBH48",scoreFlash:"Game_scoreFlash__IHTpA",showScore:"Game_showScore__O_8bK",minedBlock:"Game_minedBlock__YX8Br",blockPopUp:"Game_blockPopUp__YhGuR",blockAddedNotification:"Game_blockAddedNotification__pS9z4",slideIn:"Game_slideIn__8tAS3",quickItemName:"Game_quickItemName__Nyasz",quickItemStats:"Game_quickItemStats__VoF8k",buyBlocksButton:"Game_buyBlocksButton__k2Nva",picksIcon:"Game_picksIcon__EDa41",biomesDrawer:"Game_biomesDrawer__Ilqv3",biomesDrawerOpen:"Game_biomesDrawerOpen__DCAr2",biomesDrawerHandle:"Game_biomesDrawerHandle__mNtur",hasScroll:"Game_hasScroll__lCm9L",biomesDrawerHeader:"Game_biomesDrawerHeader__DJA95",biomesOverlay:"Game_biomesOverlay__fwGLK",biomesOverlayOpen:"Game_biomesOverlayOpen__JzSiZ",itemDescription:"Game_itemDescription__ikR7Z",blocksGrid:"Game_blocksGrid__LDEm1",blockItem:"Game_blockItem__vaqUW",blockImageContainer:"Game_blockImageContainer__zHzYs",blockItemImg:"Game_blockItemImg__BLIhi",blockNameOverlay:"Game_blockNameOverlay__0Tyfs",blockItemContent:"Game_blockItemContent__NGBwy",blockDescription:"Game_blockDescription__E1g8H",buyBlockButton:"Game_buyBlockButton__g5no3",buyBlockButtonDisabled:"Game_buyBlockButtonDisabled__8WG2u",pickaxesGrid:"Game_pickaxesGrid__hKWxc",pickaxeItem:"Game_pickaxeItem__TK3h7",pickaxeImageContainer:"Game_pickaxeImageContainer__WG56E",pickaxeItemImg:"Game_pickaxeItemImg__1RYiu",pickaxeItemContent:"Game_pickaxeItemContent__MSetD",pickaxeInfo:"Game_pickaxeInfo__918A8",buyPickaxeButton:"Game_buyPickaxeButton__7dMEP",buyPickaxeButtonDisabled:"Game_buyPickaxeButtonDisabled__RiUFp"}},6518:(e,a,t)=>{"use strict";t.r(a),t.d(a,{default:()=>C});var s=t(997),n=t(6689),o=t(88),i=t.n(o),l=t(4372),r=t(9207),c=t(2696);let m=({isOpen:e,onClose:a,gameState:t,onBuyItem:o})=>{let[l,r]=(0,n.useState)(null),m=(0,n.useRef)(null),d=c.o.items;(0,n.useEffect)(()=>{if(e&&m.current){let e=()=>{let e=m.current;e&&(e.scrollHeight>e.clientHeight?e.classList.add(i().hasScroll):e.classList.remove(i().hasScroll))};e();let a=new ResizeObserver(e);return a.observe(m.current),()=>{m.current&&a.unobserve(m.current),a.disconnect()}}},[e,d]);let _=(e,a)=>t.blockInventory.hasBlock(e,a),u=e=>{let{itemType:a,amount:s}=e.cost,n=t.blockInventory.getBlockQuantity(a);return n<s?`Need ${s-n} more ${a}`:`Buy (${s} ${a})`};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:`${i().biomesOverlay} ${e?i().biomesOverlayOpen:""}`,onClick:a}),(0,s.jsxs)("div",{className:`${i().biomesDrawer} ${e?i().biomesDrawerOpen:""}`,children:[s.jsx("div",{className:i().biomesDrawerHandle,onClick:a}),s.jsx("div",{className:i().biomesDrawerHeader,children:s.jsx("h2",{children:"Shop Pickaxes"})}),s.jsx("div",{ref:m,className:i().biomesDrawerContent,"data-drawer-type":"pickaxes",children:s.jsx("div",{className:i().biomesSection,children:s.jsx("div",{className:i().pickaxesGrid,children:c.o.items.map(e=>{let a=_(e.cost.itemType,e.cost.amount);return(0,s.jsxs)("div",{className:i().pickaxeItem,children:[s.jsx("div",{className:i().pickaxeImageContainer,children:s.jsx("img",{src:`/assets/pickaxes/${e.name.toLowerCase()}.png`,alt:`${e.name} Pickaxe`,className:i().pickaxeItemImg})}),(0,s.jsxs)("div",{className:i().pickaxeItemContent,children:[(0,s.jsxs)("div",{className:i().pickaxeInfo,children:[(0,s.jsxs)("div",{className:i().itemName,children:[e.name.charAt(0).toUpperCase()+e.name.slice(1)," Pickaxe"]}),(0,s.jsxs)("div",{className:i().itemDescription,children:["Strength: ",e.strength," | Durability: ",e.maxHealth," | Crit: ",100*e.critical,"%"]}),(0,s.jsxs)("div",{className:i().unlockCost,children:["Cost: ",(0,s.jsxs)("span",{className:a?i().affordableCost:i().unaffordableCost,children:[e.cost.amount," ",e.cost.itemType]}),(0,s.jsxs)("div",{children:["(You have: ",t.blockInventory.getBlockQuantity(e.cost.itemType),")"]})]})]}),s.jsx("button",{className:`${i().buyPickaxeButton} ${a?"":i().buyPickaxeButtonDisabled}`,onClick:()=>o(e.name,0),disabled:!a,children:u(e)})]})]},e.name)})})})})]})]})},d=({isOpen:e,onRestart:a})=>s.jsx("div",{className:`${i().modal} ${e?i().modalShow:""}`,children:(0,s.jsxs)("div",{className:i().modalContent,children:[s.jsx("h2",{children:"Game Over!"}),s.jsx("p",{children:"You've lost all your pickaxes!"}),s.jsx("button",{className:i().restartBtn,onClick:a,children:"Play Again"})]})}),_=({onBiomeClick:e,currentPickaxe:a,currentBiome:t,picksToShow:o,minedBlock:l})=>{let[r,c]=(0,n.useState)({x:0,y:0}),[m,d]=(0,n.useState)(!1),[_,u]=(0,n.useState)(t?.currentHealth||0),[k,h]=(0,n.useState)("/assets/pickaxes/wood.webp"),[x,b]=(0,n.useState)(!1),[v,p]=(0,n.useState)(null),[y,g]=(0,n.useState)(!1),[I,G]=(0,n.useState)(null),j=(0,n.useRef)(null);(0,n.useEffect)(()=>{a&&h(a.getImageUrl())},[a]),(0,n.useEffect)(()=>{if(o){p(o),b(!0);let e=setTimeout(()=>{b(!1)},1500);return()=>clearTimeout(e)}},[o]),(0,n.useEffect)(()=>{if(l){G(l),g(!0);let e=setTimeout(()=>{g(!1)},1500);return()=>clearTimeout(e)}},[l]),(0,n.useEffect)(()=>{let e=t?.currentHealth||0;if(e<_&&j.current){let e=j.current;e.classList.add(i().shake),setTimeout(()=>{e.classList.remove(i().shake)},500)}u(e)},[t?.currentHealth,_]);let N=()=>{d(!0),setTimeout(()=>d(!1),300)},B=t?.damagePercent||100;return(0,s.jsxs)("div",{className:i().biomeContainer,children:[(0,s.jsxs)("div",{ref:j,className:`${i().biome}`,onMouseMove:e=>{if(j.current){let a=j.current.getBoundingClientRect();c({x:e.clientX-a.left,y:e.clientY-a.top})}},onClick:()=>{e(),N()},style:{backgroundImage:`url(${t?.getImageUrl()})`,backgroundSize:"cover",backgroundPosition:"center"},children:[x&&v&&(0,s.jsxs)("div",{className:i().scoreFlash,children:["+",v]}),y&&I&&s.jsx("div",{className:i().minedBlock,style:{top:"50%",left:"50%",backgroundImage:`url(${I.imageUrl})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center"}}),B<100&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:i().crackOverlay,style:{opacity:Math.max(.2,1-B/100),backgroundImage:"url(/assets/crack_overlay.png)",transform:`scale(${1+(1-B/100)})`,filter:`contrast(${100+(100-B)}%) brightness(${100+(100-B)/2}%)`}}),B<50&&s.jsx("div",{className:`${i().crackOverlay} ${i().secondaryCracks}`,style:{opacity:Math.max(.1,.8-B/50),backgroundImage:"url(/assets/crack_overlay.png)",transform:`scale(${.7+(1-B/50)}) rotate(45deg)`}}),B<25&&s.jsx("div",{className:`${i().crackOverlay} ${i().criticalCracks}`,style:{opacity:Math.max(.15,.9-B/25),backgroundImage:"url(/assets/crack_overlay.png)",transform:`scale(${.9+(1-B/25)}) rotate(-30deg)`}})]}),s.jsx("div",{className:i().pickaxeCursor,style:{left:`${r.x}px`,top:`${r.y}px`},children:s.jsx("img",{src:k,alt:"Pickaxe cursor",className:m?i().swingAnimation:""})})]}),(0,s.jsxs)("div",{className:i().horizontalHealthContainer,children:[s.jsx("div",{className:i().horizontalHealthBar,style:{width:`${B}%`,backgroundColor:B>60?"#72CB3B":B>30?"#FFCC00":"#FF6B6B"}}),(0,s.jsxs)("div",{className:i().horizontalHealthText,children:[Math.ceil(B),"%"]})]})]})},u=({pickaxe:e,isSelected:a,onClick:t,className:o="",showTooltip:l=!0})=>{let[r,c]=(0,n.useState)(!1),m=e.getPickaxe().maxHealth,d=e.health/m*100,_=e.getPickaxe(),u=d<=50?`rgb(255, ${Math.round(59+d/50*158)}, ${Math.round(59+-(d/50*59))})`:`rgb(${Math.round(255-(d-50)/50*141)}, ${Math.round(217-(d-50)/50*14)}, ${Math.round(0+(d-50)/50*59)})`;return(0,s.jsxs)("div",{className:`${i().inventorySlot} ${a?i().selected:""} ${o}`,onClick:()=>{t(e.id)},onMouseEnter:()=>{c(!0)},onMouseLeave:()=>{c(!1)},title:`${e.type} Pickaxe - Health: ${e.health}/${m}`,children:[s.jsx("img",{src:e.getImageUrl(),alt:e.type,className:i().inventoryItem}),s.jsx("div",{className:i().durabilityBar,children:s.jsx("div",{className:i().durabilityFill,style:{width:`${d}%`,backgroundColor:u}})}),l&&r&&(0,s.jsxs)("div",{className:i().quickItemTooltip,children:[(0,s.jsxs)("div",{className:i().quickItemName,children:[e.type.charAt(0).toUpperCase()+e.type.slice(1)," Pickaxe"]}),(0,s.jsxs)("div",{className:i().quickItemStats,children:[(0,s.jsxs)("div",{children:["Health: ",e.health,"/",m]}),(0,s.jsxs)("div",{children:["Strength: ",_.strength]}),(0,s.jsxs)("div",{children:["Critical: ",100*_.critical,"%"]}),(0,s.jsxs)("div",{children:["Power: ",_.power]}),(0,s.jsxs)("div",{children:["Rarity: ",_.rarity]})]})]})]})},k=({isOpen:e,onClose:a,gameState:t,onSelectPickaxe:o})=>{let l=e?`${i().modal} ${i().modalShow}`:i().modal,r=t.pickaxeInventory,c=r.currentItem,m=r.getCurrentItem(),[d,_]=(0,n.useState)(c),k=d?r.items.find(e=>e.id===d):m,h=e=>{console.log("handlePickaxePreview",e),_(e)};return s.jsx("div",{className:l,children:(0,s.jsxs)("div",{className:`${i().modalContent} ${i().shopModalContent}`,children:[(0,s.jsxs)("div",{className:i().modalHeader,children:[s.jsx("h2",{children:"Inventory"}),s.jsx("button",{className:i().closeBtn,onClick:a,children:"\xd7"})]}),(0,s.jsxs)("div",{className:i().inventorySection,children:[s.jsx("h3",{children:"Pickaxes"}),s.jsx("div",{className:i().pickaxeGrid,children:r.items.map(e=>s.jsx(u,{pickaxe:e,isSelected:e.id===d,onClick:h,showTooltip:!1},e.id))})]}),k&&s.jsx("div",{className:i().inventoryDetails,children:(0,s.jsxs)("div",{className:i().selectedItemDetails,children:[(0,s.jsxs)("h4",{children:[k.type," Pickaxe"]}),(0,s.jsxs)("p",{children:["Health: ",k.health," / ",k.getPickaxe().maxHealth]}),(0,s.jsxs)("p",{children:["Strength: ",k.getPickaxe().strength]}),d!==c&&s.jsx("button",{className:i().selectButton,onClick:()=>{d&&o&&(console.log("handlePickaxeSelect",d),o(d),a())},children:"Select Pickaxe"}),d===c&&s.jsx("div",{className:i().currentlyEquipped,children:"Currently Equipped"})]})})]})})};var h=t(3740);let x=({isOpen:e,onClose:a,gameState:t,onUnlockBiome:o,onSelectBiome:l,selectionMode:r=!1})=>{let c=h.a.items,m=t.unlockedBiomes,d=t.currentBiome.type,_=t.currentBiome.currentHealth<=0,u=(0,n.useRef)(null);console.log(`BiomesModal opened - Selection mode: ${r}, Biome destroyed: ${_}, Current health: ${t.currentBiome.currentHealth}`),(0,n.useEffect)(()=>{if(e&&u.current){let e=()=>{let e=u.current;e&&(e.scrollHeight>e.clientHeight?e.classList.add(i().hasScroll):e.classList.remove(i().hasScroll))};e();let a=new ResizeObserver(e);return a.observe(u.current),()=>{u.current&&a.unobserve(u.current),a.disconnect()}}},[e,c]);let k=e=>m.includes(e.toLowerCase()),x=e=>{o&&o(e.toLowerCase())},b=e=>{l&&k(e)&&(l(e.toLowerCase()),a())},v=e=>{if(k(e))return!0;let a=h.a.getItemByName(e);return!a.cost||t.blockInventory.hasBlock(a.cost.itemType,a.cost.amount)};return(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:`${i().biomesOverlay} ${e?i().biomesOverlayOpen:""}`,onClick:a}),(0,s.jsxs)("div",{className:`${i().biomesDrawer} ${e?i().biomesDrawerOpen:""}`,children:[s.jsx("div",{className:i().biomesDrawerHandle,onClick:a}),s.jsx("div",{className:i().biomesDrawerHeader,children:s.jsx("h2",{children:r?"Select Next Biome":"Available Biomes"})}),s.jsx("div",{ref:u,className:i().biomesDrawerContent,"data-drawer-type":"biomes",children:s.jsx("div",{className:i().biomesSection,children:s.jsx("div",{className:i().biomesGrid,children:c.map(e=>{let a=k(e.name),t=v(e.name),n=e.name.toLowerCase()===d;return(0,s.jsxs)("div",{className:`${i().biomeItem} 
                                                ${a?i().biomeUnlocked:i().biomeLocked}
                                                ${n?i().biomeSelected:""}`,onClick:()=>a&&r?b(e.name):null,style:{cursor:a&&r?"pointer":"default"},children:[(0,s.jsxs)("div",{className:i().biomeImageContainer,children:[s.jsx("img",{src:`/assets/biomes/${e.name.toLowerCase()}.png`,alt:e.name,className:`${i().biomeItemImg} ${a?"":i().biomeLockedImg}`}),!a&&s.jsx("div",{className:i().lockOverlay,children:s.jsx("img",{src:"/assets/padlock.svg",alt:"Locked",className:i().lockIcon})}),(0,s.jsxs)("div",{className:i().biomeNameOverlay,children:[e.name,a&&s.jsx("span",{className:i().unlockedIndicator,children:"✓"}),n&&s.jsx("span",{className:i().currentIndicator,children:" (Current)"})]})]}),(0,s.jsxs)("div",{className:i().availableBlocks,children:[s.jsx("span",{children:"Available Blocks:"}),s.jsx("div",{className:i().blockImagesContainer,children:e.availableBlocks.map(e=>(0,s.jsxs)("div",{className:i().blockImageWrapper,children:[s.jsx("img",{src:`/assets/blocks/${e}.png`,alt:e,className:i().blockImage}),s.jsx("div",{className:i().blockName,children:e})]},e))})]}),(0,s.jsxs)("div",{className:i().itemInfo,children:[s.jsx("div",{className:i().itemDescription,children:e.description}),!a&&(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:i().unlockCost,children:e.cost?(0,s.jsxs)(s.Fragment,{children:["Cost: ",(0,s.jsxs)("span",{className:t?i().affordableCost:i().unaffordableCost,children:[e.cost.amount," ",e.cost.itemType]})]}):s.jsx("span",{className:i().affordableCost,children:"Free"})}),s.jsx("button",{className:`${i().unlockButton} ${t?"":i().unlockButtonDisabled}`,onClick:()=>x(e.name),disabled:!t,children:t?"Unlock":"Not enough resources"})]}),a&&r&&!n&&s.jsx("button",{className:i().selectButton,onClick:()=>b(e.name),children:"Select"})]})]},e.name)})})})})]})]})},b=({block:e,className:a="",showTooltip:t=!0})=>{let[o,l]=(0,n.useState)(!1),r=e.getBlock();return(0,s.jsxs)("div",{className:`${i().inventorySlot} ${a}`,title:`${e.name} - Quantity: ${e.quantity}`,onMouseEnter:()=>{l(!0)},onMouseLeave:()=>{l(!1)},children:[s.jsx("img",{src:e.getImageUrl(),alt:e.name,className:i().inventoryItem}),s.jsx("div",{className:i().itemCount,children:e.quantity}),t&&o&&(0,s.jsxs)("div",{className:i().quickItemTooltip,children:[s.jsx("div",{className:i().quickItemName,children:e.name.charAt(0).toUpperCase()+e.name.slice(1)}),(0,s.jsxs)("div",{className:i().quickItemStats,children:[(0,s.jsxs)("div",{children:["Quantity: ",e.quantity]}),(0,s.jsxs)("div",{children:["Rarity: ",r.rarity]})]})]})]})};function v({items:e,totalSlots:a,itemType:t,renderItem:n,renderEmptySlot:o}){let l=[],r=e.length,c=Math.max(1,Math.ceil(r/a));for(let m=0;m<c;m++){let c=Array(a).fill(null);for(let t=0;t<a;t++){let s=m*a+t;s<r&&(c[t]=e[s])}l.push(s.jsx("div",{className:i().quickInventory,children:c.map((e,a)=>e?n(e,m,a):o(m,a))},`${t}-row-${m}`))}return s.jsx(s.Fragment,{children:l})}let p=({gameState:e,onSelectPickaxe:a})=>{let t=e.pickaxeInventory,n=e.blockInventory,o=t.currentItem,l=e=>{a&&e&&a(e)};return(0,s.jsxs)("div",{className:i().quickInventoryContainer,children:[(0,s.jsxs)("div",{className:i().quickInventorySection,children:[s.jsx("div",{className:i().quickInventoryLabel,children:"Pickaxes"}),s.jsx(v,{items:t.items,totalSlots:8,itemType:"pickaxe",renderItem:(e,a,t)=>s.jsx(u,{pickaxe:e,isSelected:e.id===o,onClick:l},e.id),renderEmptySlot:(e,a)=>s.jsx("div",{className:i().inventorySlot},`pickaxe-empty-${e}-${a}`)})]}),(0,s.jsxs)("div",{className:i().quickInventorySection,children:[s.jsx("div",{className:i().quickInventoryLabel,children:"Blocks"}),s.jsx(v,{items:n.items,totalSlots:8,itemType:"block",renderItem:(e,a,t)=>s.jsx(b,{block:e},`block-${e.name}-${a}-${t}`),renderEmptySlot:(e,a)=>s.jsx("div",{className:i().inventorySlot},`block-empty-${e}-${a}`)})]})]})};var y=t(493),g=t(2509);class I{constructor(){this.sounds=new Map,this.soundEnabled=!0,this.preloadSound("error","/assets/sounds/error.mp3")}toggleSound(e){this.soundEnabled=e}preloadSound(e,a){try{let t=new Audio(a);this.sounds.set(e,t)}catch(a){console.error(`Error loading sound ${e}: ${a}`)}}playSound(e){if(this.soundEnabled)try{let a=this.sounds.get(e);a?(a.currentTime=0,a.play().catch(a=>{console.error(`Error playing sound ${e}: ${a}`)})):console.warn(`Sound "${e}" not found`)}catch(a){console.error(`Error playing sound ${e}: ${a}`)}}}let G=new I;var j=t(1780),N=t(7142);let B=({isOpen:e,onClose:a,gameState:t,onBuyBlock:o})=>{let l=t.currentBiome.getBiome(),r=l.availableBlocks||[],c=t.picks>=100,m=(0,n.useRef)(null);return(0,n.useEffect)(()=>{if(e&&m.current){let e=()=>{let e=m.current;e&&(e.scrollHeight>e.clientHeight?e.classList.add(i().hasScroll):e.classList.remove(i().hasScroll))};e();let a=new ResizeObserver(e);return a.observe(m.current),()=>{m.current&&a.unobserve(m.current),a.disconnect()}}},[e,r]),(0,s.jsxs)(s.Fragment,{children:[s.jsx("div",{className:`${i().biomesOverlay} ${e?i().biomesOverlayOpen:""}`,onClick:a}),(0,s.jsxs)("div",{className:`${i().biomesDrawer} ${e?i().biomesDrawerOpen:""}`,children:[s.jsx("div",{className:i().biomesDrawerHandle,onClick:a}),s.jsx("div",{className:i().biomesDrawerHeader,children:(0,s.jsxs)("h2",{children:["Buy Blocks from ",l.name," biome"]})}),s.jsx("div",{ref:m,className:i().biomesDrawerContent,"data-drawer-type":"blocks",children:(0,s.jsxs)("div",{className:i().biomesSection,children:[(0,s.jsxs)("p",{children:["Your picks: ",t.picks]}),0===r.length?s.jsx("p",{children:"No blocks available in this biome."}):s.jsx("div",{className:i().blocksGrid,children:r.map(e=>{let a=new N.f({name:e,quantity:1}).getImageUrl();return(0,s.jsxs)("div",{className:i().blockItem,children:[(0,s.jsxs)("div",{className:i().blockImageContainer,children:[s.jsx("img",{src:a,alt:e,className:i().blockItemImg}),s.jsx("div",{className:i().blockNameOverlay,children:e})]}),(0,s.jsxs)("div",{className:i().blockItemContent,children:[(0,s.jsxs)("div",{className:i().blockDescription,children:["A ",e," block from the ",l.name," biome."]}),s.jsx("button",{className:`${i().buyBlockButton} ${c?"":i().buyBlockButtonDisabled}`,onClick:()=>o(e),disabled:!c,children:c?"Buy (100 picks)":"Need 100 picks"})]})]},e)})})]})})]})]})},C=()=>{let[e,a]=(0,n.useState)(!1),[t,o]=(0,n.useState)(y.ZP.loadGameState()),[u,b]=(0,n.useState)({num1:0,num2:0,operator:"+",answer:0}),[v,I]=(0,n.useState)(""),[C,S]=(0,n.useState)(!1),[f,w]=(0,n.useState)(!1),[$,P]=(0,n.useState)(!1),[D,H]=(0,n.useState)(!1),[O,T]=(0,n.useState)(!1),[q,M]=(0,n.useState)(!1),[L,A]=(0,n.useState)(""),[E,F]=(0,n.useState)(!1),[z,R]=(0,n.useState)(""),[U,Y]=(0,n.useState)(!1),[Z,K]=(0,n.useState)(!1),[W,X]=(0,n.useState)(null),[Q,V]=(0,n.useState)(null),[J,ee]=(0,n.useState)(null),[ea,et]=(0,n.useState)(!1);(0,n.useEffect)(()=>{a(!0),b(y.ZP.generateMathProblem()),o(y.ZP.loadGameState())},[]),(0,n.useEffect)(()=>{e&&!C&&y.ZP.saveGameState(t)},[t,e,C]),(0,n.useEffect)(()=>{console.log("gameState",t);let e=t.currentBiome;e.currentHealth<=0&&(console.log("Biome destroyed! Opening selection modal..."),R(e.type),F(!0),setTimeout(()=>{F(!1)},3e3),H(!0))},[t]);let es=()=>{b(y.ZP.generateMathProblem()),I("")},en=(e=null,a=!0)=>{let s=t.pickaxeInventory.getCurrentItem();s&&(X(e=e||s.getPicks()),setTimeout(()=>{X(null)},2e3)),eo(),o(t=>{let n=t.increasePicks(e||0);if(s&&a){let e=t.currentBiome.withDamage(s.getDamageToBiome(t.currentBiome.getBiome()));return console.log(`Biome health: ${e.currentHealth}/${e.getBiome().maxHealth}`),n.withCurrentBiome(e)}return console.log("No current pickaxe found"),t})},eo=()=>{let e=t.pickaxeInventory.getCurrentItem();if(e&&Math.random()<e.getPickaxe().critical){let e=t.currentBiome;if(!e)return;let a=e.getBiome().availableBlocks;if(a&&a.length>0){let e=Math.floor(Math.random()*a.length),t=a[e],s=new N.f({name:t,quantity:1});V({name:t,imageUrl:s.getImageUrl()}),ee(s),setTimeout(()=>{ee(null)},3e3),o(e=>{let a=e.blockInventory.addBlock(t,1);return e.withBlockInventory(a)})}}},ei=()=>{Y(!0),K(!0),G.playSound("error"),document.body.classList.add("screen-shake"),setTimeout(()=>{K(!1)},1e3),setTimeout(()=>{Y(!1),document.body.classList.remove("screen-shake")},500),o(e=>{let a=e.pickaxeInventory.getCurrentItem();if(null===a)return e;let t=a.withDamage(1),s=new g.t({id:t.id,type:t.type,health:t.health});if(s.health<=0)return el(e);let n=e.pickaxeInventory.withCurrentItem(s);return e.withPickaxeInventory(n)})},el=e=>{let a=e.pickaxeInventory.getCurrentItem();if(!a)return e;if(A(a.type),M(!0),setTimeout(()=>{M(!1)},3e3),e.pickaxeInventory.length<=1)return S(!0),e;let t=e.pickaxeInventory.removeCurrentItem();return e.withPickaxeInventory(t)},er=()=>{w(e=>!e)},ec=()=>{P(e=>!e)},em=()=>{H(e=>!e)},ed=()=>{et(e=>!e)},e_=e=>{if(!t.pickaxeInventory.items.find(a=>a.id===e)){console.error("Selected pickaxe not found in inventory");return}let a=t.pickaxeInventory.withCurrentItemId(e);o(e=>{let t=e.withPickaxeInventory(a);return setTimeout(()=>{y.ZP.saveGameState(t)},0),t}),P(!1)};return(t.pickaxeInventory.length,e)?(0,s.jsxs)("div",{className:i().gameContainer,children:[(0,s.jsxs)("div",{className:i().gameHeader,children:[s.jsx("h1",{children:"MathCrafter"}),s.jsx("div",{className:i().avatar,children:s.jsx("img",{src:"/assets/avatars/avatar.png",alt:"Player Avatar",className:i().avatarImage,onClick:ec,style:{cursor:"pointer"}})}),s.jsx("div",{className:i().stats,children:(0,s.jsxs)("div",{className:i().statItem,children:[s.jsx("img",{src:"/assets/picks.png",alt:"Picks",className:i().picksIcon}),s.jsx("span",{children:t.picks})]})}),(0,s.jsxs)("div",{className:i().headerButtons,children:[(0,s.jsxs)("button",{className:i().pickaxesButton,onClick:er,children:[s.jsx("img",{src:"/assets/shop_pickaxe.png",alt:"Pickaxes",className:i().buttonIcon}),"Pickaxes"]}),(0,s.jsxs)("button",{className:i().unlockBiomesButton,onClick:em,children:[s.jsx("img",{src:"/assets/unlock_biome.png",alt:"Biomes",className:i().buttonIcon}),"Biomes"]}),(0,s.jsxs)("button",{className:i().buyBlocksButton,onClick:ed,children:[s.jsx("img",{src:"/assets/blocks.png",alt:"Blocks",className:i().buttonIcon}),"Blocks"]})]})]}),(0,s.jsxs)("div",{className:i().gameArea,children:[s.jsx(_,{onBiomeClick:()=>{if(t.currentBiome.currentHealth<=0||O)return;let e=t.pickaxeInventory.getCurrentItem();e&&(Math.random()<=e.getPickaxe().critical?(T(!0),es()):en(e.getPickaxe().strength,!1))},currentPickaxe:t.pickaxeInventory.getCurrentItem(),currentBiome:t.currentBiome,picksToShow:W,minedBlock:Q}),O&&(0,s.jsxs)("form",{className:`${i().mathProblem} ${U?i().wrongAnswerShake+" "+i().wrongAnswerFlash:""}`,onSubmit:e=>{e.preventDefault();let a=parseInt(v);isNaN(a)||(a===u.answer?(en(null,!0),es(),I(""),T(!1)):(ei(),I("")))},children:[(0,s.jsxs)("div",{className:i().question,children:[u.num1," ",u.operator," ",u.num2," = ?"]}),(0,s.jsxs)("div",{className:i().answerArea,children:[s.jsx("input",{type:"number",className:i().answer,value:v,onChange:e=>I(e.target.value),autoFocus:!0}),s.jsx("button",{type:"submit",className:i().submitBtn,children:"Mine!"})]}),(0,s.jsxs)("div",{className:i().numpad,children:[[7,8,9,4,5,6,1,2,3,0].map(e=>s.jsx("button",{type:"button",className:i().numpadBtn,onClick:()=>I(a=>a+e.toString()),children:e},e)),s.jsx("button",{type:"button",className:`${i().numpadBtn} ${i().clearBtn}`,onClick:()=>I(""),children:"Clear"}),s.jsx("button",{type:"button",className:`${i().numpadBtn} ${i().deleteBtn}`,onClick:()=>I(e=>e.slice(0,-1)),children:"←"})]})]}),Z&&s.jsx("div",{className:i().incorrectText,children:"INCORRECT!"}),s.jsx(p,{gameState:t,onSelectPickaxe:e_})]}),s.jsx(m,{isOpen:f,onClose:er,gameState:t,onBuyItem:(e,a)=>{let s=c.o.getItemByName(e);if(!s){console.error(`Pickaxe with name ${e} not found`);return}let n=s.cost.itemType,i=s.cost.amount;if(!t.blockInventory.hasBlock(n,i)){console.error(`Not enough ${n} to craft ${e} pickaxe`);return}let l=new g.t({id:null,type:e,health:null}),r=t.blockInventory;r=r.addBlock(n,-i);let m=new j.C0({items:[...t.pickaxeInventory.items,l],currentItem:l.id});o(t.withPickaxeInventory(m).withBlockInventory(r))}}),s.jsx(k,{isOpen:$,onClose:ec,gameState:t,onSelectPickaxe:e_}),s.jsx(x,{isOpen:D,onClose:em,gameState:t,onUnlockBiome:e=>{if(t.unlockedBiomes.includes(e))return;let a=h.a.getItemByName(e);if(!a){console.error(`Biome with name ${e} not found`);return}if(a.cost){let s=a.cost.itemType,n=a.cost.amount;if(!t.blockInventory.hasBlock(s,n)){console.error(`Not enough ${s} to unlock ${e} biome`);return}o(a=>{let t=a.blockInventory;t=t.addBlock(s,-n);let o=[...a.unlockedBiomes,e];return new l.D({...a,unlockedBiomes:o,blockInventory:t})})}else o(a=>{let t=[...a.unlockedBiomes,e];return new l.D({...a,unlockedBiomes:t})})},onSelectBiome:e=>{o(a=>{let t=new r.k({id:null,type:e,currentHealth:null});return a.withCurrentBiome(t)})},selectionMode:t.currentBiome.currentHealth<=0||E}),s.jsx(B,{isOpen:ea,onClose:ed,gameState:t,onBuyBlock:e=>{t.picks<100||o(a=>{let t=a.increasePicks(-100),s=t.blockInventory.addBlock(e,1);return ee(new N.f({name:e,quantity:1})),setTimeout(()=>{ee(null)},3e3),t.withBlockInventory(s)})}}),s.jsx(d,{isOpen:C,onRestart:()=>{let e=y.ZP.loadGameState();o(e),S(!1),T(!1),es(),y.ZP.saveGameState(e)}}),q&&(0,s.jsxs)("div",{className:i().brokenPickaxeNotification,children:[s.jsx("h3",{children:"Pickaxe Destroyed!"}),(0,s.jsxs)("p",{children:["Your ",L," Pickaxe has broken."]})]}),E&&(0,s.jsxs)("div",{className:i().biomeDestroyedNotification,children:[s.jsx("h3",{children:"Biome Conquered!"}),(0,s.jsxs)("p",{children:["You've mined the ",z," biome."]}),s.jsx("p",{children:"Please select a new biome to explore!"})]}),J&&(0,s.jsxs)("div",{className:i().blockAddedNotification,children:[s.jsx("img",{src:J.getImageUrl(),alt:J.name}),s.jsx("div",{children:(0,s.jsxs)("div",{children:["+1 ",J.name]})})]})]}):s.jsx("div",{className:i().gameContainer,children:"Loading..."})}}};